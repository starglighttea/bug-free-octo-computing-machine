<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Capybara Clicker: Skins & Skills</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

body {
    margin: 0;
    background: #79c267;
    font-family: 'Press Start 2P', cursive;
    text-align: center;
    image-rendering: pixelated;
}

h1 { font-size: 16px; margin-top: 15px; }

#score { margin: 10px; font-size: 12px; }

#capy {
    width: 200px;
    cursor: pointer;
    animation: idle 2s infinite ease-in-out;
    transition: transform 0.1s;
}

@keyframes idle {
    0%,100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

.panel {
    background: #f5deb3;
    border: 4px solid #5a3d25;
    padding: 10px;
    margin: 10px auto;
    width: 320px;
}

button {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    font-family: inherit;
    font-size: 9px;
    background: #b97a56;
    border: 3px solid #3b2616;
    cursor: pointer;
}

button:hover { background: #8c5a3c; }

.selected { background: #5fa8ff; }

.small { font-size: 8px; }
</style>
</head>
<body>

<h1>Capybara Clicker</h1>
<div id="score">Capybaras: 0</div>
<img id="capy" src="https://i.imgur.com/4AiXzf8.png">

<div class="panel">
<h3>Skins</h3>
<div id="skins"></div>
</div>

<div class="panel">
<h3>Skill Tree</h3>
<div id="skills"></div>
</div>

<script>
let score = 0;
let baseClick = 1;
let skillPoints = 0;
let currentSkin = "classic";

const skins = {
    classic: { cost: 0, bonus: 1, img: "https://i.imgur.com/4AiXzf8.png" },
    golden: { cost: 500, bonus: 2, img: "https://i.imgur.com/Z6X7K9C.png" },
    jungle: { cost: 2000, bonus: 3, img: "https://i.imgur.com/QCNbOAo.png" }
};

const skillTree = {
    power1: { name: "Strong Paws", cost: 1, effect: () => baseClick += 1, bought: false },
    power2: { name: "Mighty Teeth", cost: 2, effect: () => baseClick += 2, bought: false },
    efficiency: { name: "Efficient Grazing", cost: 3, effect: () => baseClick *= 2, bought: false }
};

const capy = document.getElementById("capy");

capy.onclick = () => {
    let bonus = skins[currentSkin].bonus;
    score += baseClick * bonus;
    capy.style.transform = "scale(0.9)";
    setTimeout(() => capy.style.transform = "", 100);
    checkLevel();
    update();
};

function checkLevel() {
    if (score >= 1000) {
        skillPoints = Math.floor(score / 1000);
    }
}

function renderSkins() {
    const container = document.getElementById("skins");
    container.innerHTML = "";
    for (let key in skins) {
        const s = skins[key];
        const btn = document.createElement("button");
        btn.innerHTML = key.toUpperCase() + "<br><span class='small'>Cost: " + s.cost + "</span>";
        if (currentSkin === key) btn.classList.add("selected");

        btn.onclick = () => {
            if (score >= s.cost || key === "classic") {
                score -= s.cost;
                currentSkin = key;
                capy.src = s.img;
                update();
            }
        };
        container.appendChild(btn);
    }
}

function renderSkills() {
    const container = document.getElementById("skills");
    container.innerHTML = "";
    for (let key in skillTree) {
        const skill = skillTree[key];
        const btn = document.createElement("button");
        btn.innerHTML = skill.name + "<br><span class='small'>Cost: " + skill.cost + " SP</span>";
        if (skill.bought) btn.disabled = true;

        btn.onclick = () => {
            if (skillPoints >= skill.cost && !skill.bought) {
                skillPoints -= skill.cost;
                skill.effect();
                skill.bought = true;
                update();
            }
        };
        container.appendChild(btn);
    }
}

function update() {
    document.getElementById("score").innerText =
        "Capybaras: " + Math.floor(score) + " | Skill Points: " + skillPoints;
    renderSkins();
    renderSkills();
    save();
}

function save() {
    localStorage.setItem("capyAdvancedSave", JSON.stringify({
        score, baseClick, skillPoints, currentSkin, skillTree
    }));
}

function load() {
    const data = JSON.parse(localStorage.getItem("capyAdvancedSave"));
    if (!data) return;
    score = data.score;
    baseClick = data.baseClick;
    skillPoints = data.skillPoints;
    currentSkin = data.currentSkin;
    Object.assign(skillTree, data.skillTree);
    capy.src = skins[currentSkin].img;
}

load();
update();
</script>

</body>
</html>
